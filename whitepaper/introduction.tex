
\section{Introduction and Problem Statement}

% (Give a brief overview of App Store ecosystem and intermediaries.) 

% (Explaining the problem for each of the 3 main flows. Problem of double attribution, problem of refutation,....)

App stores are a distribution channel between the developer and the end user. Although software distribution exists since there is software development, the current model of smartphone became popular with the launch of Apple App Store in July 2008, and with its pre-load in iPhone 3G.

In the same year, but later in August 2008, Google announced the launch of Android Market\cite{wiki:market}, the App Store for Android.

These initial app stores followed a centralized model where one entity is responsible for assuring the core features of software distribution: file delivery, app discovery, financial transactions, and app approval. As the smartphone userbase grew, the centralized model start to show severe flaws. The flaws and problems identified are strongly related with the existent model: lack of trust and economical efficiciency. 

By not being transparent, app stores don't earn the trust among the different stkeholders: developers, advertisers, users, and OEM manufacturers. Being centralized, they cannot benefit of the shared and crowdsourcing economy. Being closed source and hidden data, they don't promote competition and innovation.

\begin{figure}[!ht]
\centering
%\includegraphics[width=11cm]{diagrams/current_flows.png}
\includegraphics[width=\textwidth]{diagrams/current_flows.png}
\caption{Individual existent core flows in app stores.}
\label{fig:exist_flows}
\end{figure}


The App Coins protocol cover three core app store use cases:

\begin{itemize}
\item {\bf Advertising inside the app store}: the transactional flow where a developer pays for a user to install their app or game. There are different advertising models depending on the action that triggers the actual payment of the Ad: CPI (Cost per Installation), CPA (Cost per Action), CPM (Cost per mil impressions),... There are different technology and platforms to support it: Ad networks, Exchanges and RTB (Real Time Bidding).
\item {\bf In-App Purchase}: when there is something that the user wants to buy inside the app or the game, like gems or unlock levels, the purchase mechanism is done through the app store. To enable those transactions the developer has to integrate the SDK from the App Store or to use the app store API.
\item {\bf App approval}: in order the app to be available, the developer has to go through an approval process where the App Store manually tests the application and then screen it through automatic tools like anti-virus, anti-malware tools, and static and dynamic code analysis platforms.
\end{itemize}

In the next sub-sections, we'll analyse each of the above flows and the main problems faced today.

\subsection{Advertising}


Currently, the three flows presented in figure \ref{fig:exist_flows} don't have any interaction between them. They are isolated and handled by different app stores teams. The resources and information generated by one flow are not reused by the others. The intermediaries are many and were introduced to solve the lack of trust and the need to integrate with different players in a fragmented market.  



In the next sub-sections, we'll analyse each of the above flows individually and the main problems faced today.



For a developer or a publisher, the most natural place to advertise an application or game is where the users are looking for that kind of content: the app store.

\begin{figure}[!ht]
\centering
%\includegraphics[width=11cm]{diagrams/current_flows.png}
\includegraphics[width=\textwidth]{diagrams/cpi_flow.eps}
\caption{Cost per Installation (CPI) ecosystem.}
\label{fig:exist_flows}
\end{figure}

For simplicity, we will focus in the Cost per Install (CPI) model, since the difference to the other models, like Cost per Action (CPA) or Cost per Mil impressions (CPM), is a matter of who shares the risk and captures the value.

In a Advertising model where the advertiser (developer) bids for an installation, we have the three different moments:


\begin{itemize}
\item {\em Campaign creation}: the developer (advertiser) define the conditions for the Ad to run in the store. Typically, establishes a value for the bid representing the value that is willing to pay for an install. There are other types of conditions called ``filters'' and representing target requirements: it must run in a specific country, a specific smartphone, a specific operating system version,...
\item {\em Impression}: when the campaign conditions are met and the the bid is competitive, the Ad is shown. The user may click in the Ad to see the complete description of the App.
\item {\em Install}: if the user installs the App, converting the impression, an attribution is due and the corresponding money is transferred.
\end{itemize}

% Create a itemize list above 

At each of the above moments, the lack of trust between the developer and the user carries different risks. Table X summarizes the different risks at each stage.

% table

The risks presented above are today managed in different ways by the advertising ecoystem and have different impacts:

\begin{table}[h]
\centering
\begin{tabular}{|l||l|l|l|} \hline
{\bf Role} & {\bf Campaign} & {\bf Impression}  & {\bf Install} \\ \hline
{\bf User} & & & Is not a real user \\ 
 & & & ({\em R1:Risk of fake person}) \\ 
 & & & Double conversion  \\
 & & & ({\em R2:Risk of double attribution}) \\
 & & & Don't use the app  \\
 & & & ({\em R3:Risk of no attention}) \\  \hline
{\bf Publisher  /}  & & & Selling the data to third-parties \\ 
{\bf App store} & & & ({\em R4:Risk of data leak})\\ \hline
{\bf Developer} & Not enough funds & Run out of & Don't pay \\  
 & to start campaign & budget & the conversion \\  
  & ({\em R5:Risk of default}) & ({\em R5:Risk of default}) & ({\em R6:Risk of repudiation}) \\  
\hline\end{tabular}
\caption{Risks in Advertising industry classified by action and by role.}
\label{tab:risks}
\end{table}


The {\em R1.2:Risk of fake person} consists of the instatation of the Ad being presented to a non real person or bot with the purpose of deluding the advertiser.

\medskip

The {\em R1.2: Risk of double attribution} 

\medskip

The {\em R1.3:Risk of no attention}  consists

\medskip

The {\em R1.4:Risk of data leak} consists

\medskip

The {\em R1.5:Risk of default} consists

\medskip

The {\em R1.6:Risk of repudiation} ...


\subsection{In-App Billing}

% Description of In-App Billing inside the stores

In-App Billing (IAB), also called In-App Purchase, consists in the possibility of the user to buy digital items inside an app or a game. Although those items are perceived to be bough inside the App, the items are bought through the app store.

\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{diagrams/iab_flow.eps}
\caption{Current IAB flow and intermediaries.}
\label{fig:iab_flow}
\end{figure}


The need for the transactions for go through the app store were introduced as mandatory by Apple App Store and then by Google Play. The conditions for the developer's App to be distributed is that all the financial transactions have to be managed by the app store. 

The app store adds some value to this flow: 1) it may know the customer already and have is payments data, 2) has the trust of the user where the developer may have not 3) develop the technology necessary, allowing the developer to focus in the app development.

Although IAB represents a market with a huge volume of transactions processed by Google Play and Apple, there is still two big challenges.

The number of users with a credit card loaded in the store is still a minority. Only small part of the world population has access to credit card. Alternative methods like pre-paid cards are an approach but has they are physical and depend of points of sale, doesn't scale so well.

On the other hand, some of other payment methods like carrier billing have prohibitive margins that compromise the revenue share of 70\% for the developer. In some markets, the margin of the telecom operator varies between from 35\% to 60\% of the cost of the transaction. The reasons given by the telecom operators are: 1) high risk of fraud that has to be compensated 2) the users may canibilize the telecomunications balance so the margin has to pay that possibility.

Having that the user has a proper payment method, there are still some risks that have to be mitigated:

The {\em R2.1: Risk of user data leak} ...

The {\em R2.2: Risk of digital goods lost} ...

The {\em R2.3: Risk of double payment} ...

The {\em R2.4: Risk of digital items cloning} ...

A platform that handles the IAB transactions have to deal with those risks.


\subsection{Apps Approval}

% Description of today state: central approval, manual QA, automatic QA, time taken, arbitrary approval

Apps approval is one of the more critical challenges of an App Store.

\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{diagrams/apps_approval_flow.eps}
\caption{App approval in centralized App Stores.}
\label{fig:app_approval_flow}
\end{figure}


By definition, the app store is a channel between the developer and the user. Filtering which apps should be available 

% include contribution from Jo√£o Carneiro

Several risks can be found from the current centralized app approval processes:

The {\em R3.1: Risk of Malware} ...

The {\em R3.2: Risk of user data leak} ...

The {\em R3.3: Risk of censorship} ..

The {\em R3.4: Risk of arbitraty decisions} .. competition, grey areas, opposite to google insterests (user privacy) ...



\subsection{Paper organization}

This paper is organized in the following chapters. In this Chapter we started to introduce the flows, the current challenges and the flaws they carry.

Chapter \ref{sec:design} will propose the overall design of the solution for the core app store flows supported by blockchain technology. 

Chapter 3 will deep dive in the blockchain technology, presentig the main data structures and algorithms that are proposed.

The current limitations of the blockchain technology when applied to app stores are introduced in Chapter 4.

In Chapter 5, related work that shares common approaches with App Coins protocol are introduced, as well as projects that inspired parts of the App Coins protocol.

The future protocol developments will be included in Chapter 6 and this document will end with acknowledging the contributions of the several community members that contributed to this document with their suggestions and opinion.




